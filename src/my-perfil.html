<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="shared-styles.html">

<!--<link rel="import" href="../bower_components/webcomponentsjs/webcomponents-lite.min.js">-->
<link rel="import" href="../bower_components/google-map/google-map.html">
<link rel="import" href="../bower_components/google-map/google-map-marker.html">
<link rel="import" href="./login/login-users.html">

<link rel="import" href="selector-ciudades.html">
<link rel="import"  href="geo-localizacion.html">



<dom-module id="my-perfil">
  <template>
    <style include="shared-styles">
      :host {
        display: block;

        padding: 10px;
      }
        google-map {
        height: 500px;
  }
    </style>


 <firebase-query
      id="query"
      path="/ciudades"
      data="{{ciudades}}"
    ></firebase-query>
    
        <geo-localizacion 
          longitud="{{longitud}}" 
          latitud="{{latitud}}"
        ></geo-localizacion>

 <!--   <script>
        navigator.geolocation.getCurrentPosition(function(position) {
        var marca = document.createElement('google-map-marker');
        marca.setAttribute('latitude', position.coords.latitude);
        marca.setAttribute('longitude', position.coords.longitude);

   }); </script>-->


    <div class="card">
    <paper-input label="Nombre Bodega" value="{{nombrebodega}}"></paper-input>
    <paper-input label="Direccion" value="{{direccion}}"></paper-input>
   <selector-ciudades texto = "Ciudades..." items = "[[ciudades]]"></selector-ciudades>
    <paper-input label="telefono" value="{{telefono}}"></paper-input>  
    <google-map id="mapa" latitude={{latitud}} longitude={{longitud}} fit-to-marker api-key="AIzaSyC73d4bNxsIm0HvFq5GLYsu_tGfF3bJa50">
    <google-map-marker latitude={{latitud}} longitude={{longitud}} draggable="true"></google-map-marker>
    </google-map>
    <paper-button on-tap="cancelar">Cancelar</paper-button>
    <paper-button raised on-tap="insertar">Insertar</paper-button>
  </template>

  <script>
    Polymer({
      is: 'my-perfil',
      behaviors: [FirebaseBehavior],

      insertar: function() {
          this.fbref('users/'+(this.user.uid)).update({
          nombrebodega: '"'+this.nombrebodega+'"',
          direccion: '"'+this.direccion+'"',
          //ciudad: '"'+this.ciudades+'"',
          telefono: this.telefono,
          latitud: this.latitud,
          longitud: this.longitud
      })
      }

 });
  </script>
</dom-module>
