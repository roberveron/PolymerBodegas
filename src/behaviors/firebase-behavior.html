<script>
FirebaseBehavior = {
  properties: {
    fbapp: {
      type: Object,
      value: function() {
        return this.getFbapp();
      }
    }
  },
  getFbapp: function() {
    return document.createElement('iron-meta').byKey('fbapp');
  },
  
  fbref: function(ruta) {
    if(!this.fbapp) {
      this.fbapp = this.getFbapp();
    }
    return this.fbapp.database().ref(ruta);
  },
  // USERS
  fb__usersAll: function() {
    return '/users';
  },
  fb__usersOne: function(id) {
    return this.fb__usersAll() + '/' + id;
  },
  fb__chatsAll: function() {
    return '/chats';
  },
  fb__chatsOne: function(id) {
    return this.fb__chatsAll() + '/' + id;
  },

 // promociones_USUARIO
  fb__promocionesUserAll: function(id) {
    return '/promocionesUser/' + id;
  },
  fb__promocionesUserOne: function(id, key) {
    return this.fb__promocionesUserAll(id) + '/' + key;
  },
  fb_favpromocionUser: function(idUser, promocionLocData) {
    //console.log('fb_favpromocionUser', idUser, promocionLocData)
    return '/promocionesUserFavs/' + promocionLocData.userId + '/' + promocionLocData.slug + '/' + idUser
  },
  fb_favpromocionAll: function(promocionLocData) {
    //console.log('fb_favpromocionAll', '/promocionesUserFavs/' + promocionLocData.userId + '/' + promocionLocData.slug)
    return '/promocionesUserFavs/' + promocionLocData.userId + '/' + promocionLocData.slug;
  },

  // promociones GLOBALES
  fb__promocionesAll: function() {
    return '/promociones';
  },
  fb__promocionesOne: function(id) {
    return this.fb__promocionesAll() + '/' + id;
  },
  fb__numFavs: function(id) {
    return this.fb__promocionesOne(id) + '/numFavs'
  },

  // REQUEST promocion PUBLICO
  fb__requestPublicpromocionUser: function(uid) {
    return '/requestPublicpromocion/' + uid;
  },
  // REQUEST promocion PRIVADO
  fb__requestPrivatepromocionUser: function(uid) {
    return '/requestPrivatepromocion/' + uid;
  },
  // REQUEST SHARE TWITTER
  fb_twitterShareRequestUser: function(uid) {
    return '/twitter/shareRequest/' + uid;
  },
  // RESPONSE SHARE TWITTER
  fb_twitterShareResponseUser: function(uid) {
    return '/twitter/shareResponse/' + uid;
  },

  // NOTIFICATION REQUEST
  fb_notificationRequest: function(uid) {
    return '/notificationRequest/' + uid;
  },

  // NOTIFICATIONS USERS
  fb__notificationsUser: function(uid) {
    return '/notificationsUser/' + uid;
  },
  fb__notificationsUserOne: function(iduser, idnotif){
    return this.fb__notificationsUser(iduser) + '/' + idnotif;
  },

  // TOKEN DE USUARIO PARA NOTIFICACIONES PUSH
  fb__notificationTokenUser: function(id) {
    return '/userTokenPush/' + id + '/token';
  },

  //una referencia a un punto del storage
  fbStorageRef: function(ruta) {
    if(!this.fbapp) {
      this.fbapp = this.getFbapp();
    }
    return this.fbapp.storage().ref(ruta);
  },

  fs__promocionImage: function(uid, archivo) {
    return '/promociones/' + uid + '/' + archivo + '.png';
  }
};
</script>